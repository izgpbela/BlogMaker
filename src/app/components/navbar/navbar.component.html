<header class="bg-white border-b sticky top-0 z-10">
  <div class="container mx-auto px-4 flex items-center justify-between h-16">
    <a routerLink="/" class="flex items-center">
      <h1 class="text-2xl font-bold text-purple-600">Blog Maker</h1>
    </a>

    <!-- Mobile menu button -->
    <button 
      class="md:hidden"
      (click)="toggleMenu()"
      aria-label="Toggle menu"
      type="button"
    >
      <svg *ngIf="!isMenuOpen" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
      <svg *ngIf="isMenuOpen" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>

    <!-- Desktop Navigation -->
    <nav class="hidden md:flex items-center space-x-6">
      <a routerLink="/" class="text-gray-700 hover:text-purple-600 font-medium">Home</a>
      <a routerLink="/themes" class="text-gray-700 hover:text-purple-600 font-medium">Themes</a>
      <a routerLink="/analytics" class="text-gray-700 hover:text-purple-600 font-medium">Analytics</a>

      <ng-container *ngIf="isAuthenticated; else guestLinks">
        <div class="relative group" tabindex="0">
          <button class="ghost-button relative h-10 w-10 rounded-full focus:outline-none">
            <img *ngIf="user?.imageUrl" [src]="user.imageUrl" [alt]="user?.name" class="rounded-full h-10 w-10 object-cover" />
            <div *ngIf="!user?.imageUrl" class="rounded-full h-10 w-10 bg-gray-300 flex items-center justify-center text-gray-700 font-bold">
              {{ user?.name?.substring(0, 2).toUpperCase() }}
            </div>
          </button>
          <div class="absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg py-2 z-20 hidden group-focus:block">
            <a routerLink="/profile" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Profile</a>
            <a routerLink="/create-post" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5h2M12 5v14m-7-7h14" />
              </svg>
              Create Post
            </a>
            <a routerLink="/analytics" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3v18h18" />
              </svg>
              Analytics
            </a>
            <hr class="my-2" />
            <button (click)="logout()" class="w-full text-left px-4 py-2 text-red-600 hover:bg-red-100 flex items-center" type="button">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7" />
              </svg>
              Log out
            </button>
          </div>
        </div>
      </ng-container>

      <ng-template #guestLinks>
        <div class="space-x-2">
          <a routerLink="/login" class="btn btn-outline">Login</a>
          <a routerLink="/register" class="btn btn-primary">Register</a>
        </div>
      </ng-template>
    </nav>
  </div>

  <!-- Mobile Navigation -->
  <div *ngIf="isMenuOpen" class="md:hidden bg-white px-4 py-5 shadow-md">
    <nav class="flex flex-col space-y-4">
      <a routerLink="/" class="text-gray-700 hover:text-purple-600 font-medium py-2" (click)="toggleMenu()">Home</a>
      <a routerLink="/themes" class="text-gray-700 hover:text-purple-600 font-medium py-2" (click)="toggleMenu()">Themes</a>
      <a routerLink="/analytics" class="text-gray-700 hover:text-purple-600 font-medium py-2" (click)="toggleMenu()">Analytics</a>
      <ng-container *ngIf="isAuthenticated; else guestMobileLinks">
        <a routerLink="/profile" class="text-gray-700 hover:text-purple-600 font-medium py-2" (click)="toggleMenu()">Profile</a>
        <a routerLink="/create-post" class="text-gray-700 hover:text-purple-600 font-medium py-2" (click)="toggleMenu()">Create Post</a>
        <button 
          (click)="logout(); toggleMenu()"
          class="text-left text-red-600 hover:text-red-800 font-medium py-2 flex items-center"
          type="button"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7" />
          </svg>
          Log out
        </button>
      </ng-container>
      <ng-template #guestMobileLinks>
        <a routerLink="/login" class="btn btn-outline w-full" (click)="toggleMenu()">Login</a>
        <a routerLink="/register" class="btn btn-primary w-full" (click)="toggleMenu()">Register</a>
      </ng-template>
    </nav>
  </div>
</header>
